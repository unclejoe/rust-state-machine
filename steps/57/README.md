# 存在证明功能

存在证明 Pallet 非常简单，现在让我们构建所需的逻辑。

## 获取声明

我们的 Pallet 有一个简单的存储映射，从一些声明内容到该声明的所有者。

`get_claim` 函数应该作为一个简单的读取函数，返回所有者的 `T::AccountId`，如果存在的话。如果我们查询的声明没有所有者，我们应该返回 `None`。

这不是用户从外部调用的函数，但对于状态机的其他部分访问此 Pallet 中的数据非常有用。

## 创建声明

任何用户都可以向存在证明 Pallet 中添加新的声明。

唯一重要的是，我们检查该声明是否尚未被其他用户提出。

每个声明应该只有一个所有者，并且谁先提出声明谁就优先。

您可以使用 `contains_key` API 检查某个声明是否已经存在于 `claims` 存储中：

```rust
if self.claims.contains_key(&claim) {
	return Err(&"this content is already claimed");
}
```

## 撤销声明

区块链上的数据不是免费的，实际上维护成本非常高。让用户能够清理他们的数据不仅是好的，而且是鼓励的。如果用户不再需要在链上存储他们的声明，他们应该清理它。

此外，区块链的历史是不可变的。即使关于声明的数据不存在于“当前状态”中，也可以证明它在过去存在过。

将事物保持在当前状态只是为了使查询信息更容易。

要撤销声明，我们需要检查两件事：

1. 声明是否存在。
2. 想要撤销声明的人是否是该声明的所有者。

您应该能够通过调用 `get_claim` 函数并使用 `ok_or` 在声明不存在时返回错误来处理所有这些逻辑。如果声明确实存在，您应该能够直接从状态查询中提取所有者。

## 构建您的函数

完成模板中概述的 `TODO`。

之后，创建一个 `basic_proof_of_existence` 测试，以检查您的所有函数是否按预期工作。
